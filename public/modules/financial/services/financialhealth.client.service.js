'use strict';

angular.module('financial').factory('FinancialHealthService', ['$resource', function($resource){


	//Tooltips
	//1 Liquidity Ratio
	var tipLiquidity = 'The calculated result is the number of months you can maintain your current expenses habits using your current assets.</br> This ratio is used for analysing existing emergency funds. It is a prescribed practice to maintain 2-6 months of expenses as your emergency fund.  For example, if you are suddenly presented with an investment opportunity for which you must act fast, you will probably look first to draw on your liquid assets </br></br> FORMULA = Cash or Cash Equivalents / Monthly Committed Expenses';

	var tipTotalLiquidity = 'The calculated result is the number of months you can maintain your current expenses habits using your current and invested assets.</br> This ratio measures your abilitiy to pay for your expenses using your current assets in cases of emergencies (e.g when you are suddenly out of job) </br></br> FORMULA = Cash or Cash Equivalents + Invested Assets / Monthly Committed Expenses';

	//2 Savings Ratio
	var tipSaving = 'The calculated results shows the proportion of your monthly surplus income to your total monthly income.</br> It compares the monthly surplus being generated by an individual against total cash inflows. It will give you valuable insight on how well your finances are being managed. It also represents one\x27s ability to achieve his/her future goals. </br></br> FORMULA = Monthly Surplus / Monthly Income';
	
	var tipBasicSaving = 'The calculated results shows the proportion of your annual savings to your total annual income.</br> This ratio measures whether you have a healthy saving habit and also if you are saving enough given your current income. </br></br> FORMULA =  Annual Savings / Annual Total Income';

	//3 Expenses Ratio
	var tipEssentialExpenses = 'The calculated results shows the proportion of money you are spending monthly on essentials to your monthly income.</br> This ratio measures whether you are spending within your means on daily essentials. </br></br> FORMULA =  ( Total Fixed Expenses + Public Transport + Total Utilities & Household maintenance + Total Food & Necessities) / Monthly Income';

	var tipLifestyleExpenses = 'The calculated results shows the proportion of money you are spending monthly on lifestyle to your monthly income.</br> This ratio measures whether you are spending within your means on non-essentials. </br></br> FORMULA = (Maid + Car Loan Repayments + Motor Insurances + Road Tax + Carpark Fees + Petrol and Maintainence expenses + Total Misc Expenses) / Monthly Income';

	//4 Debt Ratios
	var tipAssetDebt = 'This ratio compares the assets accumulated by an individual against the existing liabilities</br> and helps in determining what you own vs. what you owe. </br></br> FORMULA = Total Liabilities / Total Assets';

	var tipDebtService = 'The calculated result is the proportion of short term liabilities to your monthly income.</br> This ratio defines how comfortable one is making his/her EMI (equated monthly installments) payments. </br></br> FORMULA = Short Term Liabilities / Total Income';

	var tipHouseExpense = 'The calculated result is the proportion of monthly expenditure on housing maintainence to your monthly income.</br> One of the best ways to determine how much housing you can afford is by calculating your housing expense ratio </br></br> FORMULA = Total Housing Expenses per Month / Total Gross Income per Month ';

	var tipDebtIncome = 'The calculated result is the proportion of monthly debt payments to your monthly income.</br> Lenders look at this ratio when they are trying to decide whether to lend you money or extend credit. A low DTI shows you have a good balance between debt and income. Lenders like this number to be low -- generally you\x27ll want to keep it below 36, but the lower it is, the greater the chance you will be able to get the loans or credit you seek. Evidence from studies of mortgage loans suggest that borrowers with a higher debt-to-income ratio are more likely to run into trouble making monthly payments. </br></br> FORMULA = Total Monthly Debt Payments / Total Monthly Income';

	var tipConsumerDebt = 'The calculated result is the proportion of monthly credit card debts to your monthly income.</br> A high consumer debt ratio could point to excessive use of credit cards. </br></br> FORMULA = Monthly consumer debt payments (all debt payments except mortgage) / Pre-tax-income';

	//5 Net Worth and Other Ratio
	var tipNetWorthBenchmark = 'This metric is used to compare your actual net worth to a standard.</br> The net worth benchmark assumes that your net worth is a function</br> of your earnings and your years of earnings </br></br> FORMULA = (Your Age x Pretax Annual Household Income from all sources except inheritances) / 10';

	var tipSolvency = 'Solvency ratio compares an individual\x27s net worth against total assets accumulated by him/her.</br> This ratio indicates the ability of an individual to repay all his/her existing debts</br> using existing assets in case of unforeseen events. </br></br> FORMULA = Net Worth / Total Assets';

	//6 Asset vs Debt Ratio
	var tipCurrentAssetDebt = 'This ratio measures how much liquid assets you have versus your short term debts to give you an overview of whether you are taking too much short term debts, or have too much liquid assets which you can adjust to get a higher return. </br></br> FORMULA = Cash or Cash Equivalents / Short Term Liabilities';

	var tipInvestment = 'This ratio compares liquid assets being held by an individual against the total assets accumulated.</br> Investments in stocks, mutual funds or other such investments,</br> which can be converted to cash easily, are considered as liquid assets. </br></br> FORMULA = Invested Assets / Total Assets';

	var tips = {
		tipLiquidity: tipLiquidity,
		tipTotalLiquidity: tipTotalLiquidity,

		tipSaving: tipSaving,
		tipBasicSaving: tipBasicSaving,

		tipEssentialExpenses: tipEssentialExpenses,
		tipLifestyleExpenses: tipLifestyleExpenses,

		tipAssetDebt: tipAssetDebt,
		tipDebtService: tipDebtService,
		tipHouseExpense: tipHouseExpense,
		tipDebtIncome: tipDebtIncome,
		tipConsumerDebt: tipConsumerDebt,

		tipNetWorthBenchmark: tipNetWorthBenchmark,
		tipSolvency: tipSolvency,

		tipCurrentAssetDebt: tipCurrentAssetDebt,
		tipInvestment: tipInvestment
	};


	//---Liquidity---
	//Liquidity Ratio
	var analysisLiquidity = {
		//[2-6, >=6]
		healthy: ['You have a healthy liquidity ratio. This means that you are able to maintain 3-6 months of your current expenses as your emergency funds. For example, if you are suddenly presented with an investment opportunity where you must act fast, your liquid assets will come in handy.', 
		'You have a healthy liquidty ratio. This means that you are able to maintain more than 6 months of your current expenses as your emergency funds. However, this is more than the recommended ratio by experts as the liquid assets you hold on hand will depreciate with inflation if not managed well. Try looking into options to grow your excess liquid assets while maintaining the healthy ratio of 3 - 6'],
		//[0-2]
		unhealthy:['You have an unhealthy liquidity ratio. This means that you are not able to maintain a healthy portion of your expenses as your emergency fund']
	};
	//Total Liquidity Ratio
	var analysisTotalLiquidity = {
		//[>=6]
		healthy: ['You have a healthy total liquidty ratio. This means that you are able to maintain more than 6 months of your current expenses as your emergency funds using your current and invested assets.'],

		//[0-6]
		unhealthy: ['You have an unhealthy liquidity ratio. This means that you are not able to maintain a healthy portion of your expenses as your emergency funds using our current and invested assets.']
	};

	//---Savings---
	//Surplus Income Ratio /Savings Ratio
	var analysisSaving = {
		//[>0.7, 0.12-0.7]
		healthy: ['You have a healthy savings ratio. This means that you have a healthy surplus of money monthly. This shows that you are able to achieve your future goals easily. However, you may have an excessive amount of income surplus. You should look to investing to prevent inflation from depreciating the value of your savings.', 'You have a healthy savings ratio. This means that you have a healthy surplus of money monthly. This shows that you are able to achieve your future goals easily.'],
		//[0-0.12, <0]
		unhealthy: ['You have an unhealthy savings ratio. This means that you may have difficulty in achieving future goals with your current monthly savings trend.', 'You have an unhealthy savings ratio. You are spending more than your monthly income. This means that you will have difficulty in achieving future goals with your current monthly savings trend.']
	};
	//Basic Saving Ratio
	var analysisBasicSaving = {
		//[>=0.1]
		healthy: ['You have a healthy basic saving ratio. This means that you are saving more than 10% of your income and have a healthy saving habit.'],

		//[<0.1]
		unhealthy: ['You have an unhealthy basic saving ratio. This means that you are saving less than 10% of your income. Aim to save more than 10% of your income to cultivate a healthy saving habit.']
	};

	//---Expenses---
	//Essential Expenses to Income Ratio
	var analysisEssentialExpenses = {
		//[<0.5]
		healthy: ['You have a healthy essential expense to income ratio. This means that you are spending a healthy proportion of your monthly income on essential needs such as your Fixed Expenses, Utilities and Household Maintenance and Food and Necessities.'],
		//[>=0.5]
		unhealthy: ['You have an unhealthy essential expense to income ratio. This means that you are spending an unhealthly large proportion of your monthly income on essential needs such as your Fixed Expenses, Utilities and Household Maintenance and Food and Necessities.']
	};
	//Lifestyle Expenses to Income Ratio
	var analysisLifestyleExpenses = {
		//[<0.5]
		healthy: ['You have a healthy lifestyle expense to income ratio. This means that you are spending a healthy proportion of your monthly income on lifestyle expenses such as holiday tours, entertainment, etc.'],

		//[>=0.5]
		unhealthy: ['You have an unhealthy essential expense to income ratio. This means that you are spending an unhealthly large proportion of your monthly income on lifestyle expenses such as holiday tours, entertainment, etc']
	};

	//---Debt---
	//AssetDebt Ratio
	var analysisAssetDebt = {
		//[0-0.3, 0.4-0.6]
		healthy: ['You have a healthy debt to assets ratio. This means that you have a lesser proportion of loans to be paid as compared to your income. Maintaining a low debt-to-assets ratio shows banks that you have a low financial', 
		'You have a almost unhealthy debt to assets ratio. This means that you have lesser proportion of loans to be paid as compared to your income but the difference is small and it poses a risk to your financial health. Banks will view you to be more of financial risky than non-risky.'],
		//[>=0.6]
		unhealthy: ['You have an unhealthy debt-to-asset ratio. This means that your debts are more than 60% of your assets and hence making you to be in a risky financial situation. Banks in Singapore are no longer allowed to approve you for any more loans. Note: this ratio might be lower if you have recently purchased a house or car and will improve over time if you are financially healthy.']
	};

	//DebtService Ratio
	var analysisDebtService = {
		//[0-0.36]
		healthy: ['You have a healthy debt service ratio. This means that you are able to make your equated monthly installments comfortably.'],
		//[>0.36]
		unhealthy: ['You have an unhealthy debt service ratio. This means that paying your equated monthly installments is putting a pressure on your finances.']
	};

	//Housing Expense Ratio
	var analysisHouseExpense = {
		//[0-0.35]
		healthy: ['You have a healthy housing expense ratio. This means that you are spending a good and reasonable amount on housing expenses in proportion to your income.'],
		//[>0.35]
		unhealthy: ['You have an unhealthy housing expense ratio. This means that you are spending too much on housing expenses in proportion to your income.']
	};

	//Debt to Income Ratio
	var analysisDebtIncome = {
		//[0-0.4]
		healthy: ['You have a healthy debt-to-income ratio. This means that you have a good balance of between your debt and income. Lenders are willling to lend you money as you show a low financial risk behavior.'],
		//[>0.4]
		unhealthy: ['You have an unhealthy debt-to-income ratio. This means that the balance between your debt and income is not good. Lenders will often not lend you money as you exhibit high financial risk behaviour. Studies of mortgage loans have shown that borrowers with a higher debt-to-income ratio are more likely to run into trouble making monthly payments.']
	};

	//Consumer Debt Ratio
	var analysisConsumerDebt = {
		//[0-0.1]
		healthy: ['You have a healthy consumer debt ratio. This means that you are borrowing wisely.'],
		//[>0.1]
		unhealthy: ['You have an unhealthy consumer debt ratio. This means that you are borrowing unnecessarily and may have a serious debt problem. Only 5% of the population ows such high percentage of consumer debt. Seek help from a debt counsellor if you need to. In the meantime, stop using credit for your expenses.']
	};

	//---Net Worth/ Others---
	//Net Worth Benchmark
	var analysisNetWorthBenchmark = {
		//[>1, 0.75-1]
		healthy: ['Your networth is higher than your age\x27s Networth Benchmark.', 'You are less than 15% away from your age\x27s Networth Benchmark.'],
		//[0-0.75]
		unhealthy: ['You are below the networth benchmark for your age.']
	};

	//Solvency Ratio
	var analysisSolvency = {
		//[>0.2]
		healthy: ['You have a healthy solvency ratio. This means that you will be able to repay your existing debts using existing assets in an event of emergency base on your networth.'],
		//[0-0.2]
		unhealthy: ['You have an unhealthy solvency ratio. This means that you will have difficulty in repaying your existing debts using existing assets in an event of emergency base on your networth.']
	};

	//---Asset vs Debts
	//Current Asset to Debt Ratio
	var analysisCurrentAssetDebt = {
		//[>=1]
		healthy: ['You have a healthy current asset to debt ratio. This means that you have more short term assets than short term debts.'],
		//[<1]
		unhealthy: ['You have an unhealthy current asset to debt ratio. This means that you have more short term debts than short term assets.']
	};

	//Investment Ratio
	var analysisInvestment = {
		//[>0.2]
		healthy: ['You have a healthy investment ratio. This means you have a healthy portion of liquid assets as compared to your total assets which can be converted to cash easily for times of need.'],
		//[0-0.2]
		unhealthy: ['You have an unhealthy investment ratio. This means that you hold a too small portion of liquid assets in proportion to your total assets. This means that you have lesser amounts of liquid assets that can be converted into cash easily for times of need.']
	};

	var analysisRatio = {
		analysisLiquidity: analysisLiquidity,
		analysisTotalLiquidity: analysisTotalLiquidity,

		analysisSaving: analysisSaving,
		analysisBasicSaving: analysisBasicSaving,

		analysisEssentialExpenses: analysisEssentialExpenses,
		analysisLifestyleExpenses: analysisLifestyleExpenses,

		analysisAssetDebt: analysisAssetDebt,
		analysisDebtService: analysisDebtService,
		analysisHouseExpense: analysisHouseExpense,
		analysisDebtIncome: analysisDebtIncome,
		analysisConsumerDebt: analysisConsumerDebt,

		analysisNetWorthBenchmark: analysisNetWorthBenchmark,
		analysisSolvency: analysisSolvency,

		analysisCurrentAssetDebt: analysisCurrentAssetDebt,
		analysisInvestment: analysisInvestment
	};

	return {
		tips: tips,
		analysisRatio: analysisRatio
	};
}]);